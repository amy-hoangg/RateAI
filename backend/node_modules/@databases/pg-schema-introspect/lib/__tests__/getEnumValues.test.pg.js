"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

const pg_1 = require("@databases/pg");

const getEnumValues_1 = require("../getEnumValues");

const db = pg_1.default({
  bigIntMode: 'number'
});
test('get custom types', async () => {
  await db.query(pg_1.sql`CREATE SCHEMA getenumvalues`);
  await db.query(pg_1.sql`
      CREATE TYPE getenumvalues.kind AS ENUM('FirstKind', 'SecondKind');
      COMMENT ON TYPE getenumvalues.kind IS 'There are two kinds of thing';
    `);
  expect((await getEnumValues_1.default(db, {
    schemaName: 'getenumvalues'
  })).map(v => ({ ...v,
    schemaID: typeof v.schemaID === 'number' ? '<oid>' : v.schemaID,
    typeID: typeof v.typeID === 'number' ? '<oid>' : v.typeID
  }))).toMatchInlineSnapshot(`
Array [
  Object {
    "schemaID": "<oid>",
    "schemaName": "getenumvalues",
    "typeID": "<oid>",
    "typeName": "kind",
    "value": "FirstKind",
  },
  Object {
    "schemaID": "<oid>",
    "schemaName": "getenumvalues",
    "typeID": "<oid>",
    "typeName": "kind",
    "value": "SecondKind",
  },
]
`);
});